# Отправка медиаданных

`/v1/media`

Для отправки изображений, видео, аудио и документов требуется предварительно выгрузить их на узел `media`. После выгрузки будет доступен идентификатор медиаданных, который следует использовать при [отправке сообщений с медиаданными](../messages/media.md).

> Максимальный размер отправляемых данных равен 37 Мбайт.

> Срок хранения медиаданных составляет 24 часа.

## Запрос {#request}

Для отправки медиаданных требуется выполнить запрос по адресу:

> Обратите внимание, что в качестве хоста используется адрес `media.green-api.com`

```
POST https://media.green-api.com/v1/media
X-Gr-File-Extension: jpeg
```

```
binary-media-data
```

В качестве полезных данных запроса следует указать бинарные данные выгружаемого файла.

### Заголовки запроса {#request-headers}

Заголовок  | Обязательный | Описание
----- | ----- | ----- | -----
`X-Gr-File-Extension` | Да | Расширение выгружаемого файла, например `jpeg`

## Ответ {#response}

При успешном ответе возвращается код HTTP `201`. В теле ответа содержится параметр `id`, который следует использовать при [отправке сообщений с медиаданными](../messages/media.md) и при [получении медиаданных](download.md). 

### Поля ответа {#response-parameters}

Поле | Тип |  Описание
----- | ----- | -----
`media` | **array** | Массив идентификаторов выгруженных файлов


Массив `media`

Поле | Тип |  Описание
----- | ----- | -----
`id ` | **string** | Идентификатор выгруженного файла. Полученный идентификатор следует использовать при [отправке сообщений с медиаданными](../messages/media.md)

### Пример тела ответа {#response-example-body}

```
201 Created
```

```json
{
    "media": [
        {
            "id": "f32bb4f9-850b-43c6-9b91-279831914c95"
        }
    ],
    "meta": {
        "api_status": "stable",
        "version": "2.0.1"
    }
}
```

### Ошибки {#errors}

Перечень общих для всех методов ошибок смотрите в разделе [Стандартные ошибки](../common-errors.md)

В случае ошибки возвращается код HTTP `400` с подробным описанием ошибки в теле ответа.

## Пример кода на Python  {#request-example-python}

```python
import requests

url = "https://media.green-api.com/v1/media"

payload = "<file contents here>"
headers = {
  'Authorization': 'Bearer {{AuthToken}}',
  'X-Gr-File-Extension': 'jpeg'
}

response = requests.request("POST", url, headers=headers, data = payload)

print(response.text.encode('utf8'))
```